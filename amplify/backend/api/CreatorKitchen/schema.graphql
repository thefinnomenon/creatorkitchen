type Content 
  @model
  @auth(rules: [
    { allow: owner, ownerField: "author" },
    { allow: public, operations: [read] }
  ]) {
  id: ID! @primaryKey(sortKeyFields: ["siteID"])
  siteID: ID! @index(name: "bySite")
  slug: String! @index(name: "contentBySiteAndSlug", queryField: "contentBySiteAndSlug", sortKeyFields: ["siteID"])
  author: String
  title: String
  description: String
  content: String
  media: AWSJSON
}

# TODO: Ensure subdomain and domain are unique
type Site
  @model
  @auth(rules: [
    { allow: owner, ownerField: "username" },
    { allow: public, operations: [read] }
  ]) {
  id: ID!
  domain: String @index(name: "siteByDomain", queryField: "siteByDomain")
  username: String @index(name: "siteByUsername", queryField: "siteByUsername")
  title: String!
  description: String!
  contents: [Content] @hasMany(indexName: "bySite", fields: ["id"])
}